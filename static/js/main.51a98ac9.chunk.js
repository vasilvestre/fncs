(this.webpackJsonpfncs=this.webpackJsonpfncs||[]).push([[0],{108:function(e,t,a){e.exports=a(126)},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),c=a(78),l=a(21),s=a(16),m=a(31),u=a(32),p=a(35),d=(a(113),a(19)),g=a(39),h=a(4),f=a(170),E=a(164),b=a(169),v=a(168),k=a(83),y=a.n(k),O=a(81),x=a.n(O),j=a(82),C=a.n(j),w=a(171),S=a(84),N=a.n(S),T=a(172);var D=a(45),I=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).onClick=function(e){n.props.onAddTicket(n.props.ticket)},n.state={user:JSON.parse(String(localStorage.getItem("user")))},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(v.a,{title:"Ticket number "+this.props.ticket.id}),r.a.createElement(b.a,null,r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(x.a,null),"Departure at ",this.props.ticket.departureAt),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(C.a,null),"Incoming at ",this.props.ticket.incomingAt),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(y.a,null),"Train number ",this.props.ticket.trainNumber))),r.a.createElement(w.a,null,!this.state.user.discountCode&&r.a.createElement(r.a.Fragment,null,"Price :",r.a.createElement(T.a,null,this.props.ticket.price," \u20ac")),this.state.user.discountCode&&r.a.createElement(r.a.Fragment,null,"Price :",r.a.createElement(T.a,{style:{textDecorationLine:"line-through",textDecorationStyle:"solid"}},this.props.ticket.price),r.a.createElement(T.a,null,"10 \u20ac")),r.a.createElement(T.a,{variant:"contained",size:"large",onClick:this.onClick},r.a.createElement(N.a,null))))}}]),t}(n.Component),W={onAddTicket:function(e){return{type:"tickets:addTicket",ticket:e}}},A=Object(D.b)(null,W)(I),_=a(62),q=a.n(_),F={getAll:function(){var e,t,a;return q.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q.a.awrap(fetch("https://ressources.data.sncf.com/api/records/1.0/search/?dataset=tgvmax&sort=date&facet=date&facet=origine&facet=destination&facet=od_happy_card"));case 2:return e=n.sent,n.next=5,q.a.awrap(e.json());case 5:return t=n.sent,a=[],t.records.map((function(e){var t=e.fields,n={id:e.recordid.substring(0,5),incomingAt:t.heure_depart,departureAt:t.heure_arrivee,destination:t.destination,trainNumber:t.train_no,origin:t.origine,date:t.date,price:20};a.push(n)})),n.abrupt("return",a);case 9:case"end":return n.stop()}}))}};var J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tickets:[],loading:!0,error:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;F.getAll().then((function(t){e.setState({tickets:t,loading:!1})})).catch((function(t){return e.setState({loading:!1,error:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.tickets,a=e.loading,n=e.error;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",null,"Loading..."),!a&&!n&&r.a.createElement(f.a,{container:!0,id:"ticket-list-container",className:this.props.classes.root,spacing:2},t.map((function(e,t){return r.a.createElement(f.a,{item:!0,xs:6,key:t},r.a.createElement(A,{ticket:e}))}))),n&&r.a.createElement("div",null,"Error message"))}}]),t}(n.Component),P=Object(h.a)((function(e){return{root:{flexGrow:1}}}))(J),L=a(14),B=a(177),M=a(178),z=a(51),G=a(176),H=a(89),R=a.n(H),U=a(90),V=a.n(U),$=a(186),K=a(93),Q=a(87),X=function e(){Object(l.a)(this,e)};X.useStyles=Object(Q.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var Y=a(183),Z=a(61),ee=a(185),te=a(174),ae=a(179),ne=a(175),re=a(181),ie=a(180),oe=a(57),ce=a.n(oe),le=a(173),se={login:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://reqres.in/api/login",t).then(ue).then((function(t){return t&&(localStorage.setItem("auth","true"),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)),e}))},logout:me};function me(){localStorage.removeItem("auth"),localStorage.removeItem("user"),localStorage.removeItem("token")}function ue(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){if(401===e.status)me(),Object(g.f)().push("/");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var pe=Object(Q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function de(e){var t=pe(),a=r.a.useState(""),n=Object(L.a)(a,2),i=n[0],o=n[1],c=r.a.useState(""),l=Object(L.a)(c,2),s=l[0],m=l[1],u=r.a.useState(!1),p=Object(L.a)(u,2),h=p[0],E=p[1];return r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(g.a,{to:"/"}),r.a.createElement(le.a,{component:"main",maxWidth:"xs"},r.a.createElement(te.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(ee.a,{className:t.avatar},r.a.createElement(ce.a,null)),r.a.createElement(z.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={email:i,password:s};se.login(a).then((function(){e.onClose(),E(!0)}))},className:t.form},r.a.createElement(ae.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){o(e.target.value)},placeholder:"eve.holt@reqres.in"}),r.a.createElement(ae.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:s,onChange:function(e){m(e.target.value)},autoComplete:"current-password",placeholder:"cityslicka"}),r.a.createElement(ne.a,{control:r.a.createElement(re.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0},r.a.createElement(d.b,{style:{textDecoration:"none",color:"white"},to:"/sign_up"},"Don't have an account? Sign Up"))))),r.a.createElement(ie.a,{mt:8})))}var ge=Object(Q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function he(e){var t=ge();return r.a.createElement(le.a,{component:"main",maxWidth:"xs"},r.a.createElement(te.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(ee.a,{className:t.avatar},r.a.createElement(ce.a,null)),r.a.createElement(z.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(ae.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(ae.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(ae.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(ae.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:e.onClose()},"Sign Up"),r.a.createElement(f.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement(d.b,{style:{textDecoration:"none",color:"white"},to:"/sign_in"},"Already have an account? Sign in"))))))}var fe=Object(Q.a)({avatar:{backgroundColor:Z.a[100],color:Z.a[600]},dialogPaper:{minHeight:"60vh",maxHeight:"80vh"}});function Ee(e){var t=fe(),a=e.onClose,n=e.open,i=function(e){a(e)};return r.a.createElement(Y.a,{onClose:function(){},classes:{paper:t.dialogPaper},"aria-labelledby":"simple-dialog-title",open:n},r.a.createElement(g.b,{exact:!0,path:"/sign_in"},r.a.createElement(de,{onClose:i})),r.a.createElement(g.b,{exact:!0,path:"/sign_up"},r.a.createElement(he,{onClose:i})))}function be(e){var t=X.useStyles(),a="true"===localStorage.getItem("auth"),n=r.a.useState(e.openLogin),i=Object(L.a)(n,2),o=i[0],c=i[1],l=r.a.useState(null),s=Object(L.a)(l,2),m=s[0],u=s[1],p=Boolean(m),g=function(){u(null)};return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{position:"static"},r.a.createElement(M.a,null,r.a.createElement(G.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(R.a,null)),r.a.createElement(z.a,{variant:"h6",className:t.title},r.a.createElement(d.b,{style:{textDecoration:"none",color:"white"},to:"/"},"FNCS")),!a&&r.a.createElement(T.a,{color:"inherit",onClick:function(){c(!0)}},r.a.createElement(d.b,{style:{textDecoration:"none",color:"white"},to:"/sign_in"},"Login")),r.a.createElement(Ee,{open:o,onClose:function(){c(!1)}}),a&&r.a.createElement("div",null,r.a.createElement(G.a,{id:"user-button","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},r.a.createElement(V.a,null)),r.a.createElement(K.a,{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:p,onClose:g},r.a.createElement($.a,{onClick:g},r.a.createElement(d.b,{style:{textDecoration:"none",color:"black"},to:"/my_tickets"},"My tickets")),r.a.createElement($.a,{onClick:g},r.a.createElement(d.b,{style:{textDecoration:"none",color:"black"},to:"/account"},"My account")),r.a.createElement($.a,{onClick:function(){u(null),se.logout()}},"Disconnect"))))))}var ve=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{container:!0,spacing:2},this.props.tickets.map((function(e,t){return r.a.createElement(f.a,{item:!0,xs:6,key:t},r.a.createElement(A,{ticket:e}))})))}}]),t}(n.Component),ke=Object(Q.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function ye(e){var t=ke(),a=JSON.parse(String(localStorage.getItem("user"))),n=r.a.useState(String(a.discountCode)),i=Object(L.a)(n,2),o=i[0],c=i[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.discountCode=o,localStorage.setItem("user",JSON.stringify(a))},className:t.form},r.a.createElement(ae.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",defaultValue:a.email,placeholder:"eve.holt@reqres.in",disabled:!0}),r.a.createElement(ae.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"discountCode",label:"discountCode",type:"text",id:"discountCode",value:o,onChange:function(e){c(e.target.value)},autoFocus:!0}),r.a.createElement(T.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Enregistrer"))}var Oe=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e,a))).state=Object(c.a)({},a,{auth:"true"===localStorage.getItem("auth")}),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,!this.state.auth&&r.a.createElement(g.a,{to:"/sign_in"}),r.a.createElement(be,{openLogin:!this.state.auth}),r.a.createElement(le.a,null,r.a.createElement(g.b,{exact:!0,path:"/"},r.a.createElement(P,null)),r.a.createElement(g.b,{exact:!0,path:"/my_tickets"},r.a.createElement(ve,{tickets:this.props.tickets})),r.a.createElement(g.b,{exact:!0,path:"/account"},r.a.createElement(ye,null))))}}]),t}(n.Component),xe=Object(D.b)((function(e){return{tickets:e.tickets}}))(Oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var je=a(23),Ce=a(15),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tickets:addTicket":return[].concat(Object(Ce.a)(e),[t.ticket]);case"tickets:removeTicket":return e.filter((function(e){return e!==t.payload.ticket}));default:return e}},Se=Object(je.b)({tickets:we}),Ne=a(68),Te=a(91),De={tickets:[]},Ie={key:"root",storage:a.n(Te).a},We=Object(Ne.a)(Ie,Se),Ae=a(92),_e=function(){var e=Object(je.c)(We,De,window.devToolsExtension&&window.devToolsExtension());return{store:e,persistor:Object(Ne.b)(e)}}(),qe=_e.store,Fe=_e.persistor;o.a.render(r.a.createElement(D.a,{store:qe},r.a.createElement(Ae.a,{loading:null,persistor:Fe},r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),window.Cypress&&(window.store=qe)}},[[108,1,2]]]);
//# sourceMappingURL=main.51a98ac9.chunk.js.map