(this.webpackJsonpfncs=this.webpackJsonpfncs||[]).push([[0],{103:function(e,t,a){e.exports=a(118)},118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),c=a.n(i),o=a(19),l=a(15),s=a(30),m=a(31),u=a(34),p=(a(108),a(20)),d=a(38),h=a(4),f=a(162),g=a(156),E=a(161),v=a(160),b=a(79),k=a.n(b),y=a(77),O=a.n(y),j=a(78),w=a.n(j),x=a(163),C=a(80),S=a.n(C),N=a(164);var T=a(45),I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(e){a.props.onAddTicket(a.props.ticket)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(v.a,{title:"Ticket number "+this.props.ticket.id}),r.a.createElement(E.a,null,r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(O.a,null),"Departure at ",this.props.ticket.departureAt),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(w.a,null),"Incoming at ",this.props.ticket.incomingAt),r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(k.a,null),"Train number ",this.props.ticket.trainNumber))),r.a.createElement(x.a,null,r.a.createElement(N.a,{variant:"contained",size:"large",onClick:this.onClick},r.a.createElement(S.a,null))))}}]),t}(n.Component),W={onAddTicket:function(e){return{type:"tickets:addTicket",ticket:e}}},_=Object(T.b)(null,W)(I),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={tickets:[],loading:!0,error:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://ressources.data.sncf.com/api/records/1.0/search/?dataset=tgvmax&sort=date&facet=date&facet=origine&facet=destination&facet=od_happy_card").then((function(e){return e.json()})).then((function(t){var a=[];t.records.map((function(e){var t=e.fields,n={id:e.recordid.substring(0,5),incomingAt:t.heure_depart,departureAt:t.heure_arrivee,destination:t.destination,trainNumber:t.train_no,origin:t.origine,date:t.date};a.push(n)})),e.setState({tickets:a,loading:!1})})).catch((function(t){return e.setState({loading:!1,error:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.tickets,a=e.loading,n=e.error;return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement("div",null,"Loading..."),!a&&!n&&r.a.createElement(f.a,{container:!0,className:this.props.classes.root,spacing:2},t.map((function(e,t){return r.a.createElement(f.a,{item:!0,xs:6,key:t},r.a.createElement(_,{ticket:e}))}))),n&&r.a.createElement("div",null,"Error message"))}}]),t}(n.Component),q=Object(h.a)((function(e){return{root:{flexGrow:1}}}))(A),D=a(21),F=a(169),P=a(170),B=a(51),J=a(168),z=a(85),G=a.n(z),L=a(86),M=a.n(L),H=a(176),R=a(87),U=a(83),V=function e(){Object(o.a)(this,e)};V.useStyles=Object(U.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var $=a(175),K=a(60),Q=a(177),X=a(166),Y=a(171),Z=a(167),ee=a(173),te=a(172),ae=a(56),ne=a.n(ae),re=a(165),ie={login:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("https://reqres.in/api/login",t).then(oe).then((function(t){return t&&(localStorage.setItem("auth","true"),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)),e}))},logout:ce};function ce(){localStorage.removeItem("auth"),localStorage.removeItem("user"),localStorage.removeItem("token")}function oe(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){if(401===e.status)ce(),Object(d.e)().push("/");var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var le=Object(U.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function se(e){var t=le(),a=r.a.useState(""),n=Object(D.a)(a,2),i=n[0],c=n[1],o=r.a.useState(""),l=Object(D.a)(o,2),s=l[0],m=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{component:"main",maxWidth:"xs"},r.a.createElement(X.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Q.a,{className:t.avatar},r.a.createElement(ne.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={email:i,password:s};ie.login(a).then((function(){e.onClose(),window.location.replace("/")}))},className:t.form},r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:i,onChange:function(e){c(e.target.value)},placeholder:"eve.holt@reqres.in"}),r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:s,onChange:function(e){m(e.target.value)},autoComplete:"current-password",placeholder:"cityslicka"}),r.a.createElement(Z.a,{control:r.a.createElement(ee.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0},r.a.createElement(p.b,{to:"/sign_up"},"Don't have an account? Sign Up"))))),r.a.createElement(te.a,{mt:8})))}var me=Object(U.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ue(e){var t=me();return r.a.createElement(re.a,{component:"main",maxWidth:"xs"},r.a.createElement(X.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Q.a,{className:t.avatar},r.a.createElement(ne.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(f.a,{container:!0,spacing:2},r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(Y.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(f.a,{item:!0,xs:12,sm:6},r.a.createElement(Y.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Y.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement(Y.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(N.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:e.onClose()},"Sign Up"),r.a.createElement(f.a,{container:!0,justify:"flex-end"},r.a.createElement(f.a,{item:!0},r.a.createElement(p.b,{to:"/sign_in"},"Already have an account? Sign in"))))))}var pe=Object(U.a)({avatar:{backgroundColor:K.a[100],color:K.a[600]},dialogPaper:{minHeight:"60vh",maxHeight:"80vh"}});function de(e){var t=pe(),a=e.onClose,n=e.open,i=function(e){a(e)};return r.a.createElement($.a,{onClose:function(){},classes:{paper:t.dialogPaper},"aria-labelledby":"simple-dialog-title",open:n},r.a.createElement(d.a,{exact:!0,path:"/sign_in"},r.a.createElement(se,{onClose:i})),r.a.createElement(d.a,{exact:!0,path:"/sign_up"},r.a.createElement(ue,{onClose:i})))}function he(){var e=V.useStyles(),t="true"===localStorage.getItem("auth"),a=r.a.useState(!1),n=Object(D.a)(a,2),i=n[0],c=n[1],o=r.a.useState(null),l=Object(D.a)(o,2),s=l[0],m=l[1],u=Boolean(s),d=function(){m(null)};return r.a.createElement("div",{className:e.root},r.a.createElement(F.a,{position:"static"},r.a.createElement(P.a,null,r.a.createElement(J.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(G.a,null)),r.a.createElement(B.a,{variant:"h6",className:e.title},r.a.createElement(p.b,{to:"/"},"FNCS")),!t&&r.a.createElement(N.a,{color:"inherit",onClick:function(){c(!0)}},r.a.createElement(p.b,{style:{textDecoration:"none",color:"white"},to:"/sign_in"},"Login")),r.a.createElement(de,{open:i,onClose:function(){c(!1)}}),t&&r.a.createElement("div",null,r.a.createElement(J.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(M.a,null)),r.a.createElement(R.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:d},r.a.createElement(H.a,{onClick:d},r.a.createElement(p.b,{to:"/my_tickets"},"My tickets")),r.a.createElement(H.a,{onClick:function(){m(null),ie.logout()}},"Disconnect"))))))}var fe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{container:!0,spacing:2},this.props.tickets.map((function(e,t){return r.a.createElement(f.a,{item:!0,xs:6,key:t},r.a.createElement(_,{ticket:e}))})))}}]),t}(n.Component),ge=function(e){function t(e,a){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).call(this,e,a))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement(he,null),r.a.createElement(re.a,null,r.a.createElement(d.a,{exact:!0,path:"/"},r.a.createElement(q,null)),r.a.createElement(d.a,{exact:!0,path:"/my_tickets"},r.a.createElement(fe,{tickets:this.props.tickets}))))}}]),t}(n.Component),Ee=Object(T.b)((function(e){return{tickets:e.tickets}}))(ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(44),be=a(14),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tickets:addTicket":return[].concat(Object(be.a)(e),[t.ticket]);case"tickets:removeTicket":return e.filter((function(e){return e!==t.payload.ticket}));default:return e}},ye=Object(ve.b)({tickets:ke}),Oe=Object(ve.c)(ye,{tickets:[]},window.devToolsExtension&&window.devToolsExtension());c.a.render(r.a.createElement(T.a,{store:Oe},r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[103,1,2]]]);
//# sourceMappingURL=main.95b4de32.chunk.js.map